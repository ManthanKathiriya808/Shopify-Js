<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link
    href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
    rel="stylesheet"
/>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header>
        <nav class="navbar navbar-expand-lg bg-dark navbar-dark">
            <div class="container-fluid ">
              <a class="navbar-brand" href="index.html">üè™</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" onclick="lsort()">Filter‚¨ÜÔ∏è</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" onclick="hsort()">Filter‚¨áÔ∏è</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link active dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Category
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#"></a></li>
                      <li><a class="dropdown-item" onclick="electronic()" href="#">Electronics</a></li>
                      <li><a class="dropdown-item" href="#" onclick="homeDecor()">Home Decoration</a></li>
                      <li><a class="dropdown-item" onclick="fashion()" href="#">Fashion</a></li>
                      <li><a class="dropdown-item" onclick="equipment()" href="#">Equipments</a></li>
                      <li><a class="dropdown-item" onclick="beautyProd()" href="#">Beauty Product</a></li>
                      
                      
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" aria-disabled="true">Disabled</a>
                  </li>
                </ul>
                <form class="d-flex" role="search">
                  <input class="form-control me-2" type="search" placeholder="Search" id="search" aria-label="Search">
                  <button class="btn btn-outline-success" type="submit">Search</button>
                </form>

                <a href="cart.html" onclick="showCart()"><button  class="btn btn-dark fs-4 mx-4">üõí<b class="text-danger" id="cartLen"></b></button></a>
              </div>
            </div>
          </nav>
    </header>


    <section>
        <div class="container mt-5">
          <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="">
                    <tr >
                        <th>Image</th>
                        <th>Title</th>
                        <th>Price</th>
                        <th>Quentity</th>
                        <th>Remove</th>
                    </tr>
                </thead>
                <tbody id="cart">
                    
                </tbody>
            </table>
            </div>

        </div>
        </section>



        <section>
          <div class="container mt-5">
            <table class="table">
             <tbody id="gtotal">

             </tbody>
            </table>
          </div>
        </section>

    
</body>
   
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

      <script src="js/script.js"></script> 

        <!-- Initialize Swiper -->
  <!-- <script>
    var swiper = new Swiper(".mySwiper", {
        spaceBetween: 30,
      centeredSlides: true,
      autoplay: {
        delay: 2500,
        disableOnInteraction: false,
      },
        pagination: {
        el: ".swiper-pagination",
        type: "progressbar",
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
    });
  </script> -->

  <script>

document.getElementById("cartLen").innerHTML = cartData.length
    
  window.onload= showCart(cartData);
  window.onload = showTotal(cartData);


function inCount(id){
  cartData =cartData.map((ele) =>{
    if(ele._id == id){
      ele.quentity += 1;

    }
    return ele
  })

  setcartData(cartData)
  showCart(cartData)
  showData(data)
}
function decCount(id){
  cartData =cartData.map((ele) =>{
    if(ele._id == id){
      if(ele.quentity > 1){
        ele.quentity -= 1;
      }
      else{
        return ele =null
      }
    }
    return ele
  }).filter((ele) => ele!=null)

  setcartData(cartData)
  
  showCart(cartData)
  showData(data)
}



function deleCartData(id){
  // console.log(id)
  let deleCart = cartData.filter((ele) => ele._id != id)
  // console.log(deleCart)
  setcartData(deleCart)
  cartData = JSON.parse(localStorage.getItem("cartData"))

showCart(cartData)
  
} 






function showCart(cartData){
  console.log(cartData)

let cart = document.getElementById("cart")
cart.innerHTML =""

cartData.map((ele) =>
{

cart.innerHTML += `
   <tr >
    <td class="align-middle">
    <img class="img-fluid " width="100px" src=${ele.image}  alt="${ele.title}" /></td>
        <td class="align-middle">${ele.title}</td>
        <td class="qPrice align-middle">${ele.price *ele.quentity}</td>
       <td class="align-middle">
  <div class="btn-group" role="group" aria-label="Basic example">
  <button type="button" class="btn btn-dark btn-sm"  onclick="inCount(${ele._id})">
    <i class="ri-add-fill  "></i></button>
  <button type="button" class="btn btn-outline-dark disabled btn-sm">
    ${ele.quentity}
    </button>
  <button type="button" class="btn btn-danger btn-sm" onclick="decCount(${ele._id})"><i class="ri-subtract-fill"  ></i></button>
</div>
        
       
       </td>
      <td class="align-middle"><button class="btn-close" onclick="deleCartData(${ele._id})" </button></td>
 </tr>

`
document.getElementById("cartLen").innerHTML = cartData.length
showTotal()
})



}



  // console.log(total)
    
function showTotal(){


let total =0

  let qPrice = document.querySelectorAll(".qPrice")
    
  qPrice.forEach((ele) => {
     total += +ele.innerText
  })


  let gtotal =document.getElementById("gtotal")
   gtotal.innerHTML = ""

  
    gtotal.innerHTML += `
    <tr>
      <td><h4>Grand total :</h4></td>
      <td>  <h6>${total}</h6></td>
    </tr>
   `
  }

  </script>

</html>